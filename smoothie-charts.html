<link rel="import" href="../polymer/polymer.html">
<script type="text/javascript" src="../smoothie/smoothie.js"></script>
<!--
  `<smoothie-charts></smoothie-charts>` http://smoothiecharts.org
  @demo demo.html
-->
<dom-module id="smoothie-charts">
  <template>
    <style>:host {display:inline-block}</style>
    <canvas id="chart" style="min" width="[[width]]" height="[[height]]"></canvas>
  </template>
</dom-module>
<script>
  Polymer({
    is: "smoothie-charts",
    properties:{
      height:{
        type:Number,
        value:100,
      },
      width:{
        type:Number,
        value:500,
      },
      rate: {
        type:Number,
        value:500,
      },
      reset: {
        computed: "getReady(rate)"
      },
      
    },
    getReady: function(rate){
      // Randomly add a data point every (rate)ms
      var random = new TimeSeries();
      for (var i = 0; i < 500; i++) {
        random.append(new Date().getTime() - (i * rate) , Math.random())
      }
      setInterval(function() {
        random.append(new Date().getTime(), Math.random())
      }, rate)
      var chart = new SmoothieChart({
        millisPerPixel:rate/5,
      })
      chart.addTimeSeries(random, { strokeStyle: 'rgba(0, 0, 255, 1)', fillStyle: 'rgba(0, 0, 255, 0.2)', lineWidth: 4 })
      chart.streamTo(this.$.chart, rate)      
    },
  })
</script>
